<!DOCTYPE html>
<html>
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no">
  <title>GospelSwipe Pro</title>
  
  <!-- PWA Manifest -->
  <link rel="manifest" href="manifest.json">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="default">
  
  <!-- Styles -->
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      overflow: hidden; color: white; height: 100vh; touch-action: pan-x;
    }
    body.dark-mode {
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
      color: #eee;
    }
    
    .container { position: relative; width: 100%; height: 100%; }
    .slide {
      position: absolute; width: 100%; height: 100%;
      display: none; flex-direction: column;
      justify-content: center; align-items: center;
      padding: 20px; text-align: center; user-select: none;
      transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    }
    .slide.active { display: flex; }
    
    h1 { font-size: 3em; margin-bottom: 20px; }
    h2 { font-size: 2.5em; margin-bottom: 20px; }
    p { font-size: 1.3em; line-height: 1.6; margin-bottom: 15px; max-width: 90%; }
    cite { font-size: 1.1em; font-style: italic; margin-bottom: 30px; }
    
    button {
      background: rgba(255,255,255,0.2); color: white;
      border: 2px solid white; padding: 15px 30px;
      font-size: 1em; border-radius: 50px; cursor: pointer; margin: 5px;
    }
    
    .hint {
      position: absolute; bottom: 20px; font-size: 0.9em;
      color: rgba(255,255,255,0.7); animation: pulse 2s infinite;
    }
    @keyframes pulse {
      0%, 100% { opacity: 0.7; }
      50% { opacity: 1; }
    }
    
    #progress-bar {
      position: fixed; bottom: 0; left: 0; height: 4px;
      background: white; width: 0%; transition: width 0.3s;
    }
    body.dark-mode #progress-bar { background: #667eea; }
    
    #ai-screen {
      display: none; position: fixed; top: 0; left: 0;
      width: 100%; height: 100%; background: white; color: black;
      padding: 20px; z-index: 1000; flex-direction: column;
    }
    #ai-screen h2 { color: #2c3e50; margin-bottom: 20px; }
    #ai-screen button {
      background: #2c3e50; color: white; border: none;
      padding: 10px 20px; border-radius: 5px; align-self: flex-start;
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- HOME -->
    <div id="home" class="slide active">
      <h1>GospelSwipe Pro</h1>
      <p>Swipe to share the Gospel</p>
      <button onclick="showSlide(1)">Start Presentation</button>
      <button onclick="toggleDarkMode()">ğŸŒ™ Dark Mode</button>
      <button onclick="shareApp()">ğŸ“¤ Share</button>
      <button onclick="alert(getUsageReport())">ğŸ“Š My Progress</button>
      <button onclick="showPrayer()">ğŸ™ Prayer Journal</button>
    </div>

    <!-- SLIDE 1 -->
    <div id="slide1" class="slide">
      <h2>God Loves You</h2>
      <p>"For God so loved the world that he gave his one and only Son, that whoever believes in him shall not perish but have eternal life."</p>
      <cite>- John 3:16</cite>
      <button onclick="speakSlide(1)">ğŸ”Š Listen</button>
      <button onclick="askAI('god-existence')">? Ask AI</button>
      <p class="hint">Swipe left for next slide â†’</p>
    </div>

    <!-- SLIDE 2 -->
    <div id="slide2" class="slide">
      <h2>Our Problem: Sin</h2>
      <p>"For all have sinned and fall short of the glory of God."</p>
      <cite>- Romans 3:23</cite>
      <button onclick="speakSlide(2)">ğŸ”Š Listen</button>
      <button onclick="askAI('suffering')">? Ask AI</button>
      <p class="hint">Swipe to navigate</p>
    </div>

    <!-- SLIDE 3 -->
    <div id="slide3" class="slide">
      <h2>God's Solution: Jesus</h2>
      <p>"But God demonstrates his own love for us in this: While we were still sinners, Christ died for us."</p>
      <cite>- Romans 5:8</cite>
      <button onclick="speakSlide(3)">ğŸ”Š Listen</button>
      <button onclick="askAI('salvation')">? Ask AI</button>
      <p class="hint">Swipe to navigate</p>
    </div>

    <!-- SLIDE 4 -->
    <div id="slide4" class="slide">
      <h2>Our Response: Faith</h2>
      <p>"For it is by grace you have been saved, through faithâ€”and this is not from yourselves, it is the gift of God."</p>
      <cite>- Ephesians 2:8-9</cite>
      <button onclick="speakSlide(4)">ğŸ”Š Listen</button>
      <button onclick="askAI('faith')">? Ask AI</button>
      <p class="hint">Swipe to navigate</p>
    </div>

    <!-- SLIDE 5 -->
    <div id="slide5" class="slide">
      <h2>New Life: Assurance</h2>
      <p>"Therefore, if anyone is in Christ, the new creation has come: The old has gone, the new is here!"</p>
      <cite>- 2 Corinthians 5:17</cite>
      <button onclick="speakSlide(5)">ğŸ”Š Listen</button>
      <button onclick="askAI('assurance')">? Ask AI</button>
      <p class="hint">Swipe right to go back</p>
    </div>

    <!-- SLIDE 6: TRINITY -->
    <div id="slide6" class="slide">
      <h2>The Trinity</h2>
      <p>"Therefore go and make disciples of all nations, baptizing them in the name of the Father and of the Son and of the Holy Spirit."</p>
      <cite>- Matthew 28:19</cite>
      <button onclick="speakSlide(6)">ğŸ”Š Listen</button>
      <button onclick="askAI('trinity')">? Ask AI</button>
      <p class="hint">Swipe to navigate</p>
    </div>

    <!-- SLIDE 7: SCRIPTURE -->
    <div id="slide7" class="slide">
      <h2>Scripture Authority</h2>
      <p>"All Scripture is God-breathed and is useful for teaching, rebuking, correcting and training in righteousness."</p>
      <cite>- 2 Timothy 3:16</cite>
      <button onclick="speakSlide(7)">ğŸ”Š Listen</button>
      <button onclick="askAI('scripture')">? Ask AI</button>
      <p class="hint">Swipe to navigate</p>
    </div>

    <!-- SLIDE 8: SUFFERING -->
    <div id="slide8" class="slide">
      <h2>Why Does God Allow Suffering?</h2>
      <p>"And we know that in all things God works for the good of those who love him."</p>
      <cite>- Romans 8:28</cite>
      <button onclick="speakSlide(8)">ğŸ”Š Listen</button>
      <button onclick="askAI('suffering')">? Ask AI</button>
      <p class="hint">Swipe to navigate</p>
    </div>

    <!-- SLIDE 9: ONLY WAY -->
    <div id="slide9" class="slide">
      <h2>Is Jesus the Only Way?</h2>
      <p>"I am the way and the truth and the life. No one comes to the Father except through me."</p>
      <cite>- John 14:6</cite>
      <button onclick="speakSlide(9)">ğŸ”Š Listen</button>
      <button onclick="askAI('only-way')">? Ask AI</button>
      <p class="hint">Swipe to navigate</p>
    </div>

    <!-- SLIDE 10: SALVATION PRAYER -->
    <div id="slide10" class="slide">
      <h2>Prayer of Salvation</h2>
      <p>"If you declare with your mouth, 'Jesus is Lord,' and believe in your heart that God raised him from the dead, you will be saved."</p>
      <cite>- Romans 10:9</cite>
      <button onclick="speakSlide(10)">ğŸ”Š Listen</button>
      <button onclick="askAI('prayer')">? Ask AI</button>
      <p class="hint">Swipe right to go back</p>
    </div>

    <!-- PRAYER JOURNAL -->
    <div id="prayer" class="slide">
      <h2>ğŸ™ Prayer Journal</h2>
      <p>Write your prayer, and God will remember it:</p>
      <textarea id="prayerText" style="width:90%; height:150px; padding:10px; border-radius:8px; border:2px solid #667eea; background:rgba(255,255,255,0.1); color:white; font-size:1.1em;" placeholder="Pour out your heart to God..."></textarea>
      <button onclick="savePrayer()">ğŸ’¾ Save Prayer</button>
      <button onclick="showSlide(0)">â† Back to Slides</button>
      <div id="savedPrayers" style="margin-top:20px; max-height:200px; overflow-y:auto;"></div>
    </div>
  </div>

  <!-- Progress Bar -->
  <div id="progress-bar"></div>

  <!-- AI Answer Screen -->
  <div id="ai-screen">
    <h2>AI Answer</h2>
    <p id="ai-answer"></p>
    <button onclick="closeAI()">Close</button>
  </div>

  <!-- JavaScript -->
  <script>
    // ==================== SERVICE WORKER ====================
    if ('serviceWorker' in navigator) {
      navigator.serviceWorker.register('sw.js').catch(err => console.log('SW failed'));
    }

    // ==================== NAVIGATION ====================
    function showSlide(num) {
      if ('speechSynthesis' in window) speechSynthesis.cancel();
      document.querySelectorAll('.slide').forEach(s => s.classList.remove('active'));
      if (num === 0) {
        document.getElementById('home').classList.add('active');
        document.getElementById('progress-bar').style.width = '0%';
      } else {
        document.getElementById('slide' + num).classList.add('active');
        document.getElementById('progress-bar').style.width = (num / 10 * 100) + '%';
        trackSlideView(num);
      }
    }

    function showPrayer() {
      document.querySelectorAll('.slide').forEach(s => s.classList.remove('active'));
      document.getElementById('prayer').classList.add('active');
      loadPrayers();
    }

    // ==================== SWIPE GESTURES ====================
    let startX = 0, endX = 0;
    document.addEventListener('touchstart', e => {
      startX = e.changedTouches[0].screenX;
    }, { passive: true });

    document.addEventListener('touchend', e => {
      endX = e.changedTouches[0].screenX;
      handleSwipe();
    }, { passive: true });

    function handleSwipe() {
      const active = document.querySelector('.slide.active');
      if (!active || active.id === 'home') return;
      
      const num = parseInt(active.id.replace('slide', ''));
      const swipeDistance = endX - startX;

      if (swipeDistance < -50 && num < 10) showSlide(num + 1);
      if (swipeDistance > 50) {
        if (num > 1) showSlide(num - 1);
        else if (num === 1) showSlide(0);
      }
    }

    // ==================== VOICE ====================
    function speakSlide(slideNum) {
      const slide = document.getElementById('slide' + slideNum);
      const text = slide.querySelector('p').textContent + ' ' + slide.querySelector('cite').textContent;
      
      if ('speechSynthesis' in window) {
        speechSynthesis.cancel();
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.rate = 0.9; utterance.pitch = 1.1; utterance.lang = 'en-US';
        speechSynthesis.speak(utterance);
      } else {
        alert('Voice not supported');
      }
    }

    // ==================== DARK MODE ====================
    function toggleDarkMode() {
      document.body.classList.toggle('dark-mode');
      localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
    }
    if (localStorage.getItem('darkMode') === 'true') document.body.classList.add('dark-mode');

    // ==================== SHARE ====================
    function shareApp() {
      if (navigator.share) {
        navigator.share({
          title: 'GospelSwipe Pro',
          text: 'Check out this AI-powered gospel presentation!',
          url: window.location.href
        });
      } else {
        alert('Copy this link: ' + window.location.href);
      }
    }

    // ==================== USAGE TRACKING ====================
    let slidesViewed = JSON.parse(localStorage.getItem('slidesViewed') || '[]');
    function trackSlideView(num) {
      if (!slidesViewed.includes(num)) {
        slidesViewed.push(num);
        localStorage.setItem('slidesViewed', JSON.stringify(slidesViewed));
      }
    }
    function getUsageReport() {
      const total = slidesViewed.length;
      return `ğŸ“Š You've viewed ${total}/10 slides. Progress: ${Math.round(total/10*100)}%`;
    }

    // ==================== PRAYER JOURNAL ====================
    function savePrayer() {
      const text = document.getElementById('prayerText').value.trim();
      if (!text) return alert('Write a prayer first');
      
      const prayers = JSON.parse(localStorage.getItem('prayers') || '[]');
      prayers.push({ text: text, date: new Date().toLocaleDateString() });
      localStorage.setItem('prayers', JSON.stringify(prayers));
      
      document.getElementById('prayerText').value = '';
      loadPrayers();
      alert('Prayer saved! God heard you.');
    }

    function loadPrayers() {
      const prayers = JSON.parse(localStorage.getItem('prayers') || '[]');
      const container = document.getElementById('savedPrayers');
      container.innerHTML = prayers.length ? 
        prayers.map(p => `<div style="border-bottom:1px solid #ccc; padding:10px; margin-bottom:10px;"><small>${p.date}</small><br>${p.text}</div>`).reverse().join('') :
        '<p style="opacity:0.6;">No prayers yet. Write your first!</p>';
    }

    // ==================== AI SIMULATION ====================
    const aiAnswers = {
      "god-existence": "The cosmological argument: Everything that begins to exist has a cause. The universe began to exist, so it has a causeâ€”God. (Genesis 1:1)",
      "suffering": "Suffering entered through human sin (Romans 5:12). God uses it to refine our faith (James 1:2-4) and promises to end it (Revelation 21:4).",
      "salvation": "Ephesians 2:8-9: 'By grace through faith, not works.' Repent, believe in Jesus, confess Him as Lord (Romans 10:9), and live for Him.",
      "faith": "Hebrews 11:1: 'Faith is confidence in what we hope for.' It grows by hearing God's Word (Romans 10:17) and trusting His promises.",
      "assurance": "John 10:28-29: Jesus gives eternal lifeâ€”no one can snatch believers from His hand. If you believe, you're secure.",
      "trinity": "Matthew 28:19 baptizes in 'Father, Son, Holy Spirit'â€”one God in three persons. Not three gods, but three distinct persons with one essence.",
      "scripture": "2 Timothy 3:16: 'All Scripture is God-breathed.' The Bible is infallible, inerrant, and our final authority for faith and practice.",
      "only-way": "Jesus said 'I am the way' (John 14:6). Salvation is exclusive to Christ, but the invitation is inclusive: 'whoever believes' (John 3:16).",
      "prayer": "Prayer is talking to God. Model: Adoration (praise), Confession (repent), Thanksgiving (gratitude), Supplication (requests). (Matthew 6:9-13)"
    };

    function askAI(topic) {
      const answer = aiAnswers[topic];
      document.getElementById('ai-answer').textContent = answer;
      document.getElementById('ai-screen').style.display = 'flex';
    }

    function closeAI() {
      document.getElementById('ai-screen').style.display = 'none';
    }

    // Prevent vertical scrolling
    document.addEventListener('touchmove', e => e.preventDefault(), { passive: false });
  </script>
</body>
</html>
